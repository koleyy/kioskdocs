<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NHSMarketingKiosk: NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NHSMarketingKiosk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_n_h_s_kiosk_app.html">NHSKioskApp</a></li><li class="navelem"><a class="el" href="namespace_n_h_s_kiosk_app_1_1_core.html">Core</a></li><li class="navelem"><a class="el" href="namespace_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp.html">CefSharp</a></li><li class="navelem"><a class="el" href="class_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp_1_1_custom_life_span_handler.html">CustomLifeSpanHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp_1_1_custom_life_span_handler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Custom implemenation of <a class="el" href="namespace_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp.html">CefSharp</a>'s LifeSpanHandler class.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler:</div>
<div class="dyncontent">
<div class="center"><img src="class_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp_1_1_custom_life_span_handler__inherit__graph.png" border="0" usemap="#a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_inherit__map" alt="Inheritance graph"/></div>
<map name="a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_inherit__map" id="a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_inherit__map">
<area shape="rect" title="Custom implemenation of CefSharp&#39;s LifeSpanHandler class." alt="" coords="5,80,207,123"/>
<area shape="rect" title=" " alt="" coords="47,5,165,32"/>
<area shape="poly" title=" " alt="" coords="109,48,109,80,103,80,103,48"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler:</div>
<div class="dyncontent">
<div class="center"><img src="class_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp_1_1_custom_life_span_handler__coll__graph.png" border="0" usemap="#a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_coll__map" alt="Collaboration graph"/></div>
<map name="a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_coll__map" id="a_n_h_s_kiosk_app_8_core_8_cef_sharp_8_custom_life_span_handler_coll__map">
<area shape="rect" title="Custom implemenation of CefSharp&#39;s LifeSpanHandler class." alt="" coords="5,80,207,123"/>
<area shape="rect" title=" " alt="" coords="47,5,165,32"/>
<area shape="poly" title=" " alt="" coords="109,48,109,80,103,80,103,48"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2043b644758df5b9f11a5ef04c59cd5b" id="r_a2043b644758df5b9f11a5ef04c59cd5b"><td class="memItemLeft" align="right" valign="top">override bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2043b644758df5b9f11a5ef04c59cd5b">OnBeforePopup</a> (IWebBrowser chromiumWebBrowser, IBrowser browser, IFrame frame, string targetUrl, string targetFrameName, WindowOpenDisposition targetDisposition, bool userGesture, IPopupFeatures popupFeatures, IWindowInfo windowInfo, IBrowserSettings browserSettings, ref bool noJavascriptAccess, out IWebBrowser? newBrowser)</td></tr>
<tr class="memdesc:a2043b644758df5b9f11a5ef04c59cd5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called before a popup window is created. Cancels the popup and redirects the main browser to the target url.  <br /></td></tr>
<tr class="separator:a2043b644758df5b9f11a5ef04c59cd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e24449fc937f947c6534f37711aa99" id="r_ae0e24449fc937f947c6534f37711aa99"><td class="memItemLeft" align="right" valign="top">override bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0e24449fc937f947c6534f37711aa99">DoClose</a> (IWebBrowser chromiumWebBrowser, IBrowser browser)</td></tr>
<tr class="memdesc:ae0e24449fc937f947c6534f37711aa99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a browser has recieved a request to close. This may result directly from a call to CefBrowserHost::CloseBrowser() or indirectly if the browser is a top-level OS window created by CEF and the user attempts to close the window. This method will be called after the JavaScript 'onunload' event has been fired. It will not be called for browsers after the associated OS window has been destroyed (for those browsers it is no longer possible to cancel the close).  <br /></td></tr>
<tr class="separator:ae0e24449fc937f947c6534f37711aa99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Custom implemenation of <a class="el" href="namespace_n_h_s_kiosk_app_1_1_core_1_1_cef_sharp.html">CefSharp</a>'s LifeSpanHandler class. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae0e24449fc937f947c6534f37711aa99" name="ae0e24449fc937f947c6534f37711aa99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e24449fc937f947c6534f37711aa99">&#9670;&#160;</a></span>DoClose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override bool NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler.DoClose </td>
          <td>(</td>
          <td class="paramtype">IWebBrowser</td>          <td class="paramname"><span class="paramname"><em>chromiumWebBrowser</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IBrowser</td>          <td class="paramname"><span class="paramname"><em>browser</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a browser has recieved a request to close. This may result directly from a call to CefBrowserHost::CloseBrowser() or indirectly if the browser is a top-level OS window created by CEF and the user attempts to close the window. This method will be called after the JavaScript 'onunload' event has been fired. It will not be called for browsers after the associated OS window has been destroyed (for those browsers it is no longer possible to cancel the close). </p>
<p>If CEF created an OS window for the browser returning false will send an OS close notification to the browser window's top-level owner (e.g. WM_CLOSE on Windows). If no OS window exists (window rendering disabled) returning false will cause the browser object to be destroyed immediately. Return true if the browser is parented to another window and that other window needs to receive close notification via some non-standard technique.</p>
<p>!!IMPORTANT!!: Behaviour of this implementation differs from the default, the WM_CLOSE message is only sent by default for popups (return false), for the main browser we return true to cancel this behaviour.</p>
<p>If an application provides its own top-level window it should handle OS close notifications by calling CefBrowserHost::CloseBrowser(false) instead of immediately closing (see the example below). This gives CEF an opportunity to process the 'onbeforeunload' event and optionally cancel the close before <a class="el" href="#ae0e24449fc937f947c6534f37711aa99" title="Called when a browser has recieved a request to close. This may result directly from a call to CefBro...">DoClose()</a> is called.</p>
<p>The CefLifeSpanHandler::OnBeforeClose() method will be called immediately before the browser object is destroyed. The application should only exit after OnBeforeClose() has been called for all existing browsers.</p>
<p>If the browser represents a modal window and a custom modal loop implementation was provided in CefLifeSpanHandler::RunModal() this callback should be used to restore the opener window to a usable state.</p>
<p>By way of example consider what should happen during window close when the browser is parented to an application-provided top-level OS window.</p><ol type="1">
<li>User clicks the window close button which sends an OS close notification (e.g. WM_CLOSE on Windows, performClose: on OS-X and "delete_event" on Linux).</li>
<li>Application's top-level window receives the close notification and: A. Calls CefBrowserHost::CloseBrowser(false). B. Cancels the window close.</li>
<li>JavaScript 'onbeforeunload' handler executes and shows the close confirmation dialog (which can be overridden via CefJSDialogHandler::OnBeforeUnloadDialog()).</li>
<li>User approves the close.</li>
<li>JavaScript 'onunload' handler executes.</li>
<li>Application's <a class="el" href="#ae0e24449fc937f947c6534f37711aa99" title="Called when a browser has recieved a request to close. This may result directly from a call to CefBro...">DoClose()</a> handler is called. Application will: A. Set a flag to indicate that the next close attempt will be allowed. B. Return false.</li>
<li>CEF sends an OS close notification.</li>
<li>Application's top-level window receives the OS close notification and allows the window to close based on the flag from #6B.</li>
<li>Browser OS window is destroyed.</li>
<li>Application's CefLifeSpanHandler::OnBeforeClose() handler is called and the browser object is destroyed.</li>
<li>Application exits by calling CefQuitMessageLoop() if no other browsers exist.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chromiumWebBrowser</td><td>the ChromiumWebBrowser control</td></tr>
    <tr><td class="paramname">browser</td><td>The browser instance - check if IsDisposed as it's possible when the browser is disposing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>For default behaviour return false</dd></dl>

</div>
</div>
<a id="a2043b644758df5b9f11a5ef04c59cd5b" name="a2043b644758df5b9f11a5ef04c59cd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2043b644758df5b9f11a5ef04c59cd5b">&#9670;&#160;</a></span>OnBeforePopup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override bool NHSKioskApp.Core.CefSharp.CustomLifeSpanHandler.OnBeforePopup </td>
          <td>(</td>
          <td class="paramtype">IWebBrowser</td>          <td class="paramname"><span class="paramname"><em>chromiumWebBrowser</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IBrowser</td>          <td class="paramname"><span class="paramname"><em>browser</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IFrame</td>          <td class="paramname"><span class="paramname"><em>frame</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>targetUrl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>targetFrameName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WindowOpenDisposition</td>          <td class="paramname"><span class="paramname"><em>targetDisposition</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>userGesture</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IPopupFeatures</td>          <td class="paramname"><span class="paramname"><em>popupFeatures</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IWindowInfo</td>          <td class="paramname"><span class="paramname"><em>windowInfo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IBrowserSettings</td>          <td class="paramname"><span class="paramname"><em>browserSettings</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ref bool</td>          <td class="paramname"><span class="paramname"><em>noJavascriptAccess</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out IWebBrowser?</td>          <td class="paramname"><span class="paramname"><em>newBrowser</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called before a popup window is created. Cancels the popup and redirects the main browser to the target url. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chromiumWebBrowser</td><td>the ChromiumWebBrowser control</td></tr>
    <tr><td class="paramname">browser</td><td>The browser instance that launched this popup.</td></tr>
    <tr><td class="paramname">frame</td><td>The HTML frame that launched this popup.</td></tr>
    <tr><td class="paramname">targetUrl</td><td>The URL of the popup content. (This may be empty/null)</td></tr>
    <tr><td class="paramname">targetFrameName</td><td>The name of the popup. (This may be empty/null)</td></tr>
    <tr><td class="paramname">targetDisposition</td><td>The value indicates where the user intended to open the popup (e.g. current tab, new tab, etc)</td></tr>
    <tr><td class="paramname">userGesture</td><td>The value will be true if the popup was opened via explicit user gesture (e.g. clicking a link) or false if the popup opened automatically (e.g. via the DomContentLoaded event).</td></tr>
    <tr><td class="paramname">popupFeatures</td><td>structure contains additional information about the requested popup window</td></tr>
    <tr><td class="paramname">windowInfo</td><td>window information</td></tr>
    <tr><td class="paramname">browserSettings</td><td>browser settings, defaults to source browsers</td></tr>
    <tr><td class="paramname">noJavascriptAccess</td><td>value indicates whether the new browser window should be scriptable and in the same process as the source browser.</td></tr>
    <tr><td class="paramname">newBrowser</td><td>EXPERIMENTAL - Low level this allows for assigning the CefClient instance associated with the new ChromiumWebBrowser instance to the CefClient param of the CefLifeSpanHandler::OnBeforeBrowser method. This allows for all the handlers, LifeSpanHandler, DisplayHandler, etc to be associated with the CefClient of the new ChromiumWebBrowser instance to be associated with the popup (browser). WPF/WinForms specific code is still required to host the popup (browser) in the new ChromiumWebBrowser instance. Set to null for default behaviour. If you return true (cancel popup creation) then his property <b>MUST</b> be null, an exception will be thrown otherwise. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>By default the popup (browser) is opened in a new native window. If you return true then creation of the popup (browser) is cancelled, no further action will occur. Otherwise return false to allow creation of the popup (browser). </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>NHSKioskApp/Core/CefSharp/<a class="el" href="_custom_life_span_handler_8cs.html">CustomLifeSpanHandler.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
